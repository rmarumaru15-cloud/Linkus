# Linkus アプリケーション設計図 (Phase 2)

このドキュメントは、Linkusアプリケーションの初期開発フェーズ完了後の追加機能と設計方針について記述します。

## 1. 設計方針の確認

### 1.1. アドレスの管理

*   **メインアドレス (`User.wallet_address`):**
    *   **役割:** ログイン認証の主要なキー。
    *   **仕様:** セキュリティ上の理由から、ユーザーが簡単なフォームで手動変更することは**不可**とします。アドレスの変更や再紐付けが必要な場合は、別途安全なプロセス（例: 新しいアドレスで署名検証を行うフロー）を将来的に検討します。

*   **サブアドレス (`Address` モデル):**
    *   **役割:** ユーザーがプロフィール上で公開したい追加のウォレットアドレス。
    *   **仕様:** ユーザーは、自身のプロフィール編集画面から自由にこれらのアドレスを追加、編集、削除できるものとします。

## 2. 追加機能開発計画 (Phase 2)

以下の計画で、ユーザーからフィードバックのあった不足機能を実装します。

### 2.1. ログイン・登録ページの改善
*   **目的:** ウォレットでのログイン/登録フローをより明確にし、ユーザー体験を向上させる。
*   **実装内容:**
    *   `login.html`と`signup.html`テンプレートを修正。
    *   従来のメール/パスワードフォームの隣に、「ウォレットでログイン/登録」を行うためのボタンを明確に配置します。
    *   このボタンは、フロントエンドのJavaScriptを介して、すでに実装済みのウォレット認証バックエンド（Nonce発行→署名検証→ログイン）を呼び出します。

### 2.2. SNSリンクとサブアドレスの管理機能
*   **目的:** ユーザーがプロフィールに表示する追加情報を管理できるようにする。
*   **実装内容:**
    *   `profiles`アプリに、`SnsLink`オブジェクトと`Address`オブジェクト（サブアドレス）を管理するためのビューとフォームを実装します（CRUD操作）。
    *   プロフィール編集ページに、これらの情報を管理するためのUI（例: フォームセットやリスト表示）を追加します。
    *   プロフィール詳細ページ (`profile_detail.html`) を更新し、登録されたSNSリンクとサブアドレスを一覧表示します。

### 2.3. プロフィールページのカスタマイズ機能
*   **目的:** ユーザーが自身のプロフィールページのデザインを一部変更できるようにする。
*   **実装内容:**
    *   `CustomUserChangeForm` (`accounts/forms.py`) を更新し、`theme`フィールド（例: テーマカラーの選択肢）を追加します。
    *   `profile_detail.html`テンプレートを更新し、`user.theme`に保存された値に基づいてCSSを動的に適用するロジックを追加します。

### 2.4. 多言語対応（言語切り替え機能）
*   **目的:** ユーザーがサイトの表示言語を切り替えられるようにする。
*   **実装内容:**
    *   Django標準の`set_language`リダイレクトビューを利用します。
    *   `base.html`のナビゲーションバーに、言語選択用のドロップダウンメニュー（例: 日本語/English）を設置します。選択された言語はユーザーセッションに保存されます。
